================================================================================
üéâ –£–°–ü–ï–•: HTTP –ü–†–û–ö–°–ò –†–ê–ë–û–¢–ê–ï–¢!
================================================================================

‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û:

1. ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ —Å SOCKS5 –Ω–∞ HTTP –ø—Ä–æ–∫—Å–∏ - –≥–æ—Ä–∞–∑–¥–æ –ø—Ä–æ—â–µ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
2. ‚úÖ –£–±—Ä–∞–ª–∏ —Å–ª–æ–∂–Ω—ã–π proxy extension - –Ω–µ –Ω—É–∂–µ–Ω –¥–ª—è HTTP
3. ‚úÖ –£–ø—Ä–æ—Å—Ç–∏–ª–∏ browser_manager.py - HTTP –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç auth –Ω–∞–ø—Ä—è–º—É—é
4. ‚úÖ –û–±–Ω–æ–≤–∏–ª–∏ Profile-1 —Å –Ω–æ–≤—ã–º –ø—Ä–æ–∫—Å–∏: mproxy.site:12138
5. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª–∏ Celery worker —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—á–µ—Ä–µ–¥—è–º–∏ (-Q yandex,default,warmup)
6. ‚úÖ –ò–º–ø–æ—Ä—Ç –º–æ–¥—É–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π

================================================================================
üìä –†–ï–ó–£–õ–¨–¢–ê–¢ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:
================================================================================

üü¢ HTTP –ü—Ä–æ–∫—Å–∏ (mproxy.site:12138):
   ‚úÖ curl test successful - IP: 213.87.153.164
   ‚úÖ –ó–∞–¥–∞—á–∞ 9c2a6693-a02e-4e22-b9fe-ff2fabfd312b –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
   ‚úÖ –ë—Ä–∞—É–∑–µ—Ä –∑–∞–ø—É—Å—Ç–∏–ª—Å—è —Å –ø—Ä–æ–∫—Å–∏
   ‚úÖ Chrome —É—Å–ø–µ—à–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª HTTP –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
   ‚ùå "Unable to bypass Yandex protection" - –Ø–Ω–¥–µ–∫—Å –æ–±–Ω–∞—Ä—É–∂–∏–ª –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é

–í–´–í–û–î: –ü—Ä–æ–∫—Å–∏ –†–ê–ë–û–¢–ê–ï–¢! –ë—Ä–∞—É–∑–µ—Ä –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ HTTP –ø—Ä–æ–∫—Å–∏, –Ω–æ –Ø–Ω–¥–µ–∫—Å
       –±–ª–æ–∫–∏—Ä—É–µ—Ç –∏–∑-–∑–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –∫–∞–ø—á–∏.

================================================================================
üîß –ß–¢–û –ë–´–õ–û –°–î–ï–õ–ê–ù–û:
================================================================================

1. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
   UPDATE browser_profiles SET
     proxy_host = 'mproxy.site',
     proxy_port = 12138,
     proxy_username = 'Hes9yF',
     proxy_password = 'zAU2vaEUf4TU',
     proxy_type = 'http'
   WHERE name = 'Profile-1';

2. –£–ø—Ä–æ—â—ë–Ω core/browser_manager.py:
   - –£–¥–∞–ª—ë–Ω –º–µ—Ç–æ–¥ _create_proxy_extension() (–ø—Ä–∏—á–∏–Ω–∞ –∑–∞–≤–∏—Å–∞–Ω–∏—è)
   - –î–ª—è HTTP –ø—Ä–æ–∫—Å–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä—è–º–∞—è —Å—Ç—Ä–æ–∫–∞:
     http://username:password@host:port
   - SOCKS5 —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

3. –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω Celery worker:
   python3 -m celery -A tasks.celery_app worker \
     --loglevel=info --concurrency=4 \
     -Q yandex,default,warmup --detach

4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ –∑–∞–¥–∞—á—É:
   visit_yandex_maps_profile_task(1, 'https://yandex.ru/maps/org/medsemya/...')

================================================================================
üìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:
================================================================================

‚úÖ –ì–û–¢–û–í–û: HTTP –ø—Ä–æ–∫—Å–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç, –±—Ä–∞—É–∑–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
‚ùå –û–°–¢–ê–õ–û–°–¨: –û–±–æ–π—Ç–∏ –∑–∞—â–∏—Ç—É –Ø–Ω–¥–µ–∫—Å–∞

–í–ê–†–ò–ê–ù–¢ 1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å anti-captcha —Å–µ—Ä–≤–∏—Å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á –æ—Ç anti-captcha.com –∏–ª–∏ 2captcha.com
   - –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á –≤ .env: ANTICAPTCHA_API_KEY=xxx
   - Captcha solver —É–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –∫–æ–¥

–í–ê–†–ò–ê–ù–¢ 2: –£–ª—É—á—à–∏—Ç—å –º–∞—Å–∫–∏—Ä–æ–≤–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
   - –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏ –≤ –¥–µ–π—Å—Ç–≤–∏—è
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ "–ø—Ä–æ–≥—Ä–µ—Ç—ã–µ" –ø—Ä–æ—Ñ–∏–ª–∏ —Å –∏—Å—Ç–æ—Ä–∏–µ–π
   - –£–≤–µ–ª–∏—á–∏—Ç—å –ø–∞—É–∑—ã –º–µ–∂–¥—É –¥–µ–π—Å—Ç–≤–∏—è–º–∏

–í–ê–†–ò–ê–ù–¢ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –±—Ä–∞—É–∑–µ—Ä–∞
   - –í–æ–∑–º–æ–∂–Ω–æ –Ø–Ω–¥–µ–∫—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–ø—á—É
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å headless=False —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —ç–∫—Ä–∞–Ω
   - –°–¥–µ–ª–∞—Ç—å screenshot –ø—Ä–∏ –æ—à–∏–±–∫–µ

================================================================================
üéØ –ò–¢–û–ì:
================================================================================

‚úÖ –ì–õ–ê–í–ù–û–ï –î–û–°–¢–ò–ñ–ï–ù–ò–ï: HTTP –ø—Ä–æ–∫—Å–∏ mproxy.site:12138 –†–ê–ë–û–¢–ê–ï–¢!
‚úÖ –ë—Ä–∞—É–∑–µ—Ä —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
‚úÖ Chrome –Ω–∞—Ç–∏–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç HTTP auth (username:password@host:port)
‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Å –∏–º–ø–æ—Ä—Ç–æ–º —Ä–µ—à–µ–Ω–∞ (—É–±—Ä–∞–ª–∏ proxy extension)
‚úÖ Worker —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

‚ùå –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞: –Ø–Ω–¥–µ–∫—Å –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é
   –†–µ—à–µ–Ω–∏–µ: anti-captcha —Å–µ—Ä–≤–∏—Å –∏–ª–∏ —É–ª—É—á—à–µ–Ω–∏–µ anti-detection

–°–∏—Å—Ç–µ–º–∞ –Ω–∞ 95% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞. –û—Å—Ç–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –æ–±—Ö–æ–¥ –∑–∞—â–∏—Ç—ã –Ø–Ω–¥–µ–∫—Å–∞.

================================================================================
üìã –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê:
================================================================================

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏:
python3 -c "from celery.result import AsyncResult; from tasks.celery_app import app; r=AsyncResult('TASK_ID', app=app); print(r.status, r.info)"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤–æ–µ –ø–æ—Å–µ—â–µ–Ω–∏–µ:
python3 -c "from tasks.yandex_maps import visit_yandex_maps_profile_task; result=visit_yandex_maps_profile_task.apply_async(args=[1, 'https://yandex.ru/maps/org/medsemya/1201821372']); print(result.id)"

# –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏:
tail -f logs/celery.log | grep -E '(proxy|Successfully|Error|Captcha)'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏:
python3 -m celery -A tasks.celery_app inspect active

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å worker:
ps aux | grep -E 'celery.*worker' | grep -v grep
