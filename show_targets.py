#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""Show Yandex Targets status"""
from app.database import SessionLocal
from app.models import YandexMapTarget

print("=" * 60)
print("‚úÖ –í–ï–ë-–ò–ù–¢–ï–†–§–ï–ô–° –ì–û–¢–û–í!")
print("=" * 60)
print()
print("üåê –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:")
print("   http://127.0.0.1:8000/yandex-targets")
print()
print("üìã –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:")
print("   ‚Ä¢ –ú–æ–¥–µ–ª—å YandexMapTarget - —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ü–µ–ª–µ–π")
print("   ‚Ä¢ API endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ü–µ–ª—è–º–∏")
print("   ‚Ä¢ –í–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è")
print("   ‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π–∫–∏:")
print("     - –°—Å—ã–ª–∫–∏ –Ω–∞ –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç—ã")
print("     - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å–µ—â–µ–Ω–∏–π –≤ –¥–µ–Ω—å")
print("     - –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –º–µ–∂–¥—É –ø–æ—Å–µ—â–µ–Ω–∏—è–º–∏")
print("     - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ")
print("     - –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å (—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ñ–∏–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)")
print("     - –î–µ–π—Å—Ç–≤–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø—Ä–æ–∫—Ä—É—Ç–∫–∞, —Ñ–æ—Ç–æ, –æ—Ç–∑—ã–≤—ã, –∏ —Ç.–¥.)")
print()
print("üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:")
print("   ‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ü–µ–ª–µ–π")
print("   ‚Ä¢ –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è —Ü–µ–ª–µ–π")
print("   ‚Ä¢ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Å–µ—â–µ–Ω–∏–π")
print("   ‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–π —Ü–µ–ª–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ")
print()
print("üìä –¢–µ–∫—É—â–∏–µ —Ü–µ–ª–∏:")

with SessionLocal() as db:
    targets = db.query(YandexMapTarget).all()
    if targets:
        for t in targets:
            status = "üü¢ –ê–∫—Ç–∏–≤–Ω–∞" if t.is_active else "üî¥ –ù–µ–∞–∫—Ç–∏–≤–Ω–∞"
            print(f"   ‚Ä¢ [{t.id}] {status} - {t.url[:60]}...")
            print(f"       –ü–æ—Å–µ—â–µ–Ω–∏–π: {t.visits_per_day}/–¥–µ–Ω—å, –ò–Ω—Ç–µ—Ä–≤–∞–ª: {t.min_interval_minutes}-{t.max_interval_minutes} –º–∏–Ω")
    else:
        print("   (–ø–æ–∫–∞ –Ω–µ—Ç —Ü–µ–ª–µ–π - –¥–æ–±–∞–≤—å—Ç–µ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)")

print()
print("üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ—Å–µ—â–µ–Ω–∏–π")
print()
